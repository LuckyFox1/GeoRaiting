webpackJsonp([0],{439:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(67),s=a(207),r=a(447),o={getMetcasts:s.a,loginUser:s.b,registerUser:s.c,showLogInForm:s.d,setUser:s.e},c=function(e){return{home:e.home}};t.default=a.i(n.connect)(c,o)(r.a)},440:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1],a=i[t.type];return a?a(e,t):e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var s,r=a(444),o=a.n(r),c=a(119),i=(s={},o()(s,c.a,function(e,t){return Object.assign({},e,{metcasts:t.payload.metcasts})}),o()(s,c.b,function(e,t){return Object.assign({},e,{loggedIn:t.payload.loggedIn})}),o()(s,c.c,function(e,t){return Object.assign({},e,{user:t.payload.user})}),o()(s,c.d,function(e,t){return Object.assign({},e,{showLoginForm:t.payload.show})}),s),l={loggedIn:!1,user:null,showLoginForm:!1,metcasts:[]}},443:function(e,t,a){"use strict";var n=a(202),s=a.n(n),r=a(203),o=a.n(r),c=a(205),i=a.n(c),l=a(204),m=a.n(l),u=a(6),g=a.n(u),p=a(7),f=a.n(p),d=a(50),h=function(e){function t(){var e,a,n,r;s()(this,t);for(var o=arguments.length,c=Array(o),l=0;l<o;l++)c[l]=arguments[l];return a=n=i()(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),n._handleSignIn=function(){n.props.showLogInForm&&n.props.showLogInForm(!0)},r=a,i()(n,r)}return m()(t,e),o()(t,[{key:"render",value:function(){var e=this.props.loggedIn;return g.a.createElement("div",{className:"header"},g.a.createElement("div",{className:"wrapper"},g.a.createElement(d.IndexLink,{to:"/",activeClassName:"active",className:"nav-item home"}),g.a.createElement("div",{className:"title"},"Top weather forecasts"),e?"":g.a.createElement(d.Link,{to:"#",activeClassName:"active",className:"nav-item log-in",onClick:this._handleSignIn},"Sign In"),e?g.a.createElement(d.Link,{to:"/admin",activeClassName:"active",className:"nav-item admin"},"Admin"):""))}}]),t}(u.Component);h.propTypes={loggedIn:f.a.bool},t.a=h},444:function(e,t,a){"use strict";t.__esModule=!0;var n=a(206),s=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t,a){return t in e?(0,s.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},447:function(e,t,a){"use strict";var n=a(202),s=a.n(n),r=a(203),o=a.n(r),c=a(205),i=a.n(c),l=a(204),m=a.n(l),u=a(6),g=a.n(u),p=a(7),f=a.n(p),d=a(451),h=(a.n(d),a(443)),v=a(448),N=function(e){function t(){return s()(this,t),i()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.getMetcasts()}},{key:"render",value:function(){var e=this.props,t=e.home,a=e.setUser;return g.a.createElement("div",null,g.a.createElement(h.a,{loggedIn:t.user,showLogInForm:this.props.showLogInForm}),g.a.createElement("ul",{className:"metcasts-list"},t.metcasts.map(function(e){return g.a.createElement("li",{className:"metcast",key:e._id},g.a.createElement("div",{className:"left-col"},g.a.createElement("img",{className:"icon",src:e.images,alt:e.name})),g.a.createElement("div",{className:"right-col"},g.a.createElement("div",{className:"name"},e.name),g.a.createElement("a",{className:"link",href:"//"+e.url},e.url),g.a.createElement("div",{className:"rating"},g.a.createElement("div",{className:"rating-icon"}),g.a.createElement("span",{className:"rating-value"},e.rating))))})),t.showLoginForm?g.a.createElement(v.a,{showLogInForm:this.props.showLogInForm,loginUser:this.props.loginUser,registerUser:this.props.registerUser,setUser:a}):"")}}]),t}(u.Component);N.propTypes={getMetcasts:f.a.func,home:f.a.object,showLogInForm:f.a.func,loginUser:f.a.func,registerUser:f.a.func},t.a=N},448:function(e,t,a){"use strict";var n=a(202),s=a.n(n),r=a(203),o=a.n(r),c=a(205),i=a.n(c),l=a(204),m=a.n(l),u=a(6),g=a.n(u),p=a(7),f=a.n(p),d=a(452),h=(a.n(d),function(e){function t(e){s()(this,t);var a=i()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.login=function(){fetch("/login",{method:"POST",body:JSON.stringify({user:{name:a.refs.name.value,password:a.refs.password.value}}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){e.user?(a.props.setUser(e.user),a.setState({error:!1,message:""}),a.props.showLogInForm(!1)):a.setState({error:!0,message:"Username or password is invalid."})}).catch(function(e){console.log(e)})},a.register=function(){fetch("/register",{method:"POST",body:JSON.stringify({user:{name:a.refs.name.value,password:a.refs.password.value}}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){e.user?(a.setState({error:!1,message:"Account was successfully created"}),a.refs.name.value="",a.refs.password.value=""):a.setState({error:!0,message:e.message})}).catch(function(e){console.log(e)})},a.state={error:!1,message:""},a}return m()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=(e.login,e.home,e.showLogInForm);return console.log(this.props),g.a.createElement("div",{className:"overlay"},g.a.createElement("div",{className:"login-form-wrapper"},g.a.createElement("button",{className:"close-login-form",onClick:function(){t(!1)}}),g.a.createElement("div",{className:"login-form"},g.a.createElement("div",{className:"name-field"},g.a.createElement("div",{className:"message-box"},this.state.error?g.a.createElement("span",{className:"alert-message"},this.state.message):"",!this.state.error&&this.state.message.length?g.a.createElement("span",{className:"success-message"},this.state.message):""),g.a.createElement("label",{className:"name-label"},"Username: "),g.a.createElement("input",{className:"name-input",ref:"name",type:"text"})),g.a.createElement("div",{className:"password-field"},g.a.createElement("label",{className:"password-label"},"Password: "),g.a.createElement("input",{className:"password-input",ref:"password",type:"text"}))),g.a.createElement("button",{className:"btn",onClick:this.login},"Sing In"),g.a.createElement("button",{className:"btn",onClick:this.register},"Register")))}}]),t}(u.Component));h.propTypes={login:f.a.object,home:f.a.object,setUser:f.a.func,registerUser:f.a.func,showLogInForm:f.a.func},t.a=h},451:function(e,t){},452:function(e,t){}});
//# sourceMappingURL=0.7c3b7b0ce5baa051976d.js.map